___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.

___INFO___

{
  "displayName": "intent.ly",
  "description": "intent.ly's Optimization Service will significantly boost your website Conversion Rate, through our onsite and offsite tools. See https://intent.ly/ for more information",
  "categories": ["MARKETING", "AFFILIATE_MARKETING", "SALES"],
  "securityGroups": [],
  "id": "cvt_temp_public_id",
  "type": "TAG",
  "version": 1,
  "brand": {
    "thumbnail": "data:image/jpeg;base64,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",
    "displayName": "intent.ly Tag",
    "id": "brand_dummy"
  },
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "notSetText": "Your Tag ID is provided by your intent.ly representative",
    "help": "Your Tag ID is provided by your intent.ly representative",
    "displayName": "Tag ID",
    "simpleValueType": true,
    "name": "tagID",
    "type": "TEXT",
    "valueHint": "example.com"
  }
]


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "inject_script",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://*.smct.co/*"
              },
              {
                "type": 1,
                "string": "https://smct.co/*"
              },
              {
                "type": 1,
                "string": "https://ep.smct.co/*"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "debug"
          }
        }
      ]
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "access_globals",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keys",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "$smcInstall"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

const injectScript = require('injectScript');
const log = require('logToConsole');
const copyFromWindow = require('copyFromWindow');
const setInWindow = require('setInWindow');
const smc = copyFromWindow('$smcInstall');
const encodeUriComponent = require('encodeUriComponent');
if(typeof smc === 'undefined') {
	setInWindow('$smcInstall', 1, true);
    const url = 'https://smct.co/tm/?t='+encodeUriComponent(data.tagID);
    injectScript(url, data.gtmOnSuccess, data.gtmOnFailure, 'intently');
} else {
  	data.gtmOnFailure();
}


___NOTES___

Created on 12/08/2019, 10:38:30
